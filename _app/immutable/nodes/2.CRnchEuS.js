var me=Object.defineProperty;var X=r=>{throw TypeError(r)};var de=(r,e,t)=>e in r?me(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var k=(r,e,t)=>de(r,typeof e!="symbol"?e+"":e,t),pe=(r,e,t)=>e.has(r)||X("Cannot "+t);var A=(r,e,t)=>(pe(r,e,"read from private field"),t?t.call(r):e.get(r)),W=(r,e,t)=>e.has(r)?X("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t);import{b as K,d as ge,a as S,t as ce}from"../chunks/disclose-version.CZe85zwM.js";import{b as Ce,h as q,z as ee,d as ye,f as re,v as we,B as je,w as ke,y as _e,t as Ee,e as Te,R as $e,ab as De,ac as ve,P as D,N as w,p as Le,u as Pe,i as Ne,a8 as R,aa as b,a7 as ze,a9 as V}from"../chunks/runtime.CFib0yYN.js";import{p as he,i as Ie,b as te}from"../chunks/this.D5LJPsTz.js";import{b as ne}from"../chunks/paths.CSbxbkqE.js";function Oe(r,e,t,a,s){var n=r,i="",u;Ce(()=>{if(i===(i=e()??"")){q&&ee();return}u!==void 0&&(Te(u),u=void 0),i!==""&&(u=ye(()=>{if(q){re.data;for(var o=ee(),l=o;o!==null&&(o.nodeType!==8||o.data!=="");)l=o,o=we(o);if(o===null)throw je(),ke;K(re,l),n=_e(o);return}var f=i+"",c=ge(f);K(Ee(c),c.lastChild),n.before(c)}))})}function ae(r,e,t,a){var s=r.__attributes??(r.__attributes={});if(q){s[e]=r.getAttribute(e);return}s[e]!==(s[e]=t)&&(t==null?r.removeAttribute(e):typeof t!="string"&&xe(r).includes(e)?r[e]=t:r.setAttribute(e,t))}var se=new Map;function xe(r){var e=se.get(r.nodeName);if(e)return e;se.set(r.nodeName,e=[]);for(var t,a=r,s=Element.prototype;s!==a;){t=De(a);for(var n in t)t[n].set&&e.push(n);a=$e(a)}return e}function C(){}C.prototype={diff:function(e,t){var a,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=s.callback;typeof s=="function"&&(n=s,s={});var i=this;function u(h){return h=i.postProcess(h,s),n?(setTimeout(function(){n(h)},0),!0):h}e=this.castInput(e,s),t=this.castInput(t,s),e=this.removeEmpty(this.tokenize(e,s)),t=this.removeEmpty(this.tokenize(t,s));var o=t.length,l=e.length,f=1,c=o+l;s.maxEditLength!=null&&(c=Math.min(c,s.maxEditLength));var j=(a=s.timeout)!==null&&a!==void 0?a:1/0,p=Date.now()+j,m=[{oldPos:-1,lastComponent:void 0}],g=this.extractCommon(m[0],t,e,0,s);if(m[0].oldPos+1>=l&&g+1>=o)return u(ie(i,m[0].lastComponent,t,e,i.useLongestToken));var T=-1/0,d=1/0;function y(){for(var h=Math.max(T,-f);h<=Math.min(d,f);h+=2){var v=void 0,$=m[h-1],L=m[h+1];$&&(m[h-1]=void 0);var M=!1;if(L){var Z=L.oldPos-h;M=L&&0<=Z&&Z<o}var Q=$&&$.oldPos+1<l;if(!M&&!Q){m[h]=void 0;continue}if(!Q||M&&$.oldPos<L.oldPos?v=i.addToPath(L,!0,!1,0,s):v=i.addToPath($,!1,!0,1,s),g=i.extractCommon(v,t,e,h,s),v.oldPos+1>=l&&g+1>=o)return u(ie(i,v.lastComponent,t,e,i.useLongestToken));m[h]=v,v.oldPos+1>=l&&(d=Math.min(d,h-1)),g+1>=o&&(T=Math.max(T,h+1))}f++}if(n)(function h(){setTimeout(function(){if(f>c||Date.now()>p)return n();y()||h()},0)})();else for(;f<=c&&Date.now()<=p;){var _=y();if(_)return _}},addToPath:function(e,t,a,s,n){var i=e.lastComponent;return i&&!n.oneChangePerToken&&i.added===t&&i.removed===a?{oldPos:e.oldPos+s,lastComponent:{count:i.count+1,added:t,removed:a,previousComponent:i.previousComponent}}:{oldPos:e.oldPos+s,lastComponent:{count:1,added:t,removed:a,previousComponent:i}}},extractCommon:function(e,t,a,s,n){for(var i=t.length,u=a.length,o=e.oldPos,l=o-s,f=0;l+1<i&&o+1<u&&this.equals(a[o+1],t[l+1],n);)l++,o++,f++,n.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return f&&!n.oneChangePerToken&&(e.lastComponent={count:f,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=o,l},equals:function(e,t,a){return a.comparator?a.comparator(e,t):e===t||a.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],a=0;a<e.length;a++)e[a]&&t.push(e[a]);return t},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function ie(r,e,t,a,s){for(var n=[],i;e;)n.push(e),i=e.previousComponent,delete e.previousComponent,e=i;n.reverse();for(var u=0,o=n.length,l=0,f=0;u<o;u++){var c=n[u];if(c.removed)c.value=r.join(a.slice(f,f+c.count)),f+=c.count;else{if(!c.added&&s){var j=t.slice(l,l+c.count);j=j.map(function(p,m){var g=a[f+m];return g.length>p.length?g:p}),c.value=r.join(j)}else c.value=r.join(t.slice(l,l+c.count));l+=c.count,c.added||(f+=c.count)}}return n}var Me=new C;function Ae(r,e,t){return Me.diff(r,e,t)}function oe(r,e){var t;for(t=0;t<r.length&&t<e.length;t++)if(r[t]!=e[t])return r.slice(0,t);return r.slice(0,t)}function ue(r,e){var t;if(!r||!e||r[r.length-1]!=e[e.length-1])return"";for(t=0;t<r.length&&t<e.length;t++)if(r[r.length-(t+1)]!=e[e.length-(t+1)])return r.slice(-t);return r.slice(-t)}function J(r,e,t){if(r.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(r)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return t+r.slice(e.length)}function H(r,e,t){if(!e)return r+t;if(r.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(r)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return r.slice(0,-e.length)+t}function P(r,e){return J(r,e,"")}function I(r,e){return H(r,e,"")}function le(r,e){return e.slice(0,Re(r,e))}function Re(r,e){var t=0;r.length>e.length&&(t=r.length-e.length);var a=e.length;r.length<e.length&&(a=r.length);var s=Array(a),n=0;s[0]=0;for(var i=1;i<a;i++){for(e[i]==e[n]?s[i]=s[n]:s[i]=n;n>0&&e[i]!=e[n];)n=s[n];e[i]==e[n]&&n++}n=0;for(var u=t;u<r.length;u++){for(;n>0&&r[u]!=e[n];)n=s[n];r[u]==e[n]&&n++}return n}var O="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",be=new RegExp("[".concat(O,"]+|\\s+|[^").concat(O,"]"),"ug"),x=new C;x.equals=function(r,e,t){return t.ignoreCase&&(r=r.toLowerCase(),e=e.toLowerCase()),r.trim()===e.trim()};x.tokenize=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');t=Array.from(e.intlSegmenter.segment(r),function(n){return n.segment})}else t=r.match(be)||[];var a=[],s=null;return t.forEach(function(n){/\s/.test(n)?s==null?a.push(n):a.push(a.pop()+n):/\s/.test(s)?a[a.length-1]==s?a.push(a.pop()+n):a.push(s+n):a.push(n),s=n}),a};x.join=function(r){return r.map(function(e,t){return t==0?e:e.replace(/^\s+/,"")}).join("")};x.postProcess=function(r,e){if(!r||e.oneChangePerToken)return r;var t=null,a=null,s=null;return r.forEach(function(n){n.added?a=n:n.removed?s=n:((a||s)&&fe(t,s,a,n),t=n,a=null,s=null)}),(a||s)&&fe(t,s,a,null),r};function fe(r,e,t,a){if(e&&t){var s=e.value.match(/^\s*/)[0],n=e.value.match(/\s*$/)[0],i=t.value.match(/^\s*/)[0],u=t.value.match(/\s*$/)[0];if(r){var o=oe(s,i);r.value=H(r.value,i,o),e.value=P(e.value,o),t.value=P(t.value,o)}if(a){var l=ue(n,u);a.value=J(a.value,u,l),e.value=I(e.value,l),t.value=I(t.value,l)}}else if(t)r&&(t.value=t.value.replace(/^\s*/,"")),a&&(a.value=a.value.replace(/^\s*/,""));else if(r&&a){var f=a.value.match(/^\s*/)[0],c=e.value.match(/^\s*/)[0],j=e.value.match(/\s*$/)[0],p=oe(f,c);e.value=P(e.value,p);var m=ue(P(f,p),j);e.value=I(e.value,m),a.value=J(a.value,f,m),r.value=H(r.value,f,f.slice(0,f.length-m.length))}else if(a){var g=a.value.match(/^\s*/)[0],T=e.value.match(/\s*$/)[0],d=le(T,g);e.value=I(e.value,d)}else if(r){var y=r.value.match(/\s*$/)[0],_=e.value.match(/^\s*/)[0],h=le(y,_);e.value=P(e.value,h)}}var Ve=new C;Ve.tokenize=function(r){var e=new RegExp("(\\r?\\n)|[".concat(O,"]+|[^\\S\\n\\r]+|[^").concat(O,"]"),"ug");return r.match(e)||[]};var Y=new C;Y.tokenize=function(r,e){e.stripTrailingCr&&(r=r.replace(/\r\n/g,`
`));var t=[],a=r.split(/(\n|\r\n)/);a[a.length-1]||a.pop();for(var s=0;s<a.length;s++){var n=a[s];s%2&&!e.newlineIsToken?t[t.length-1]+=n:t.push(n)}return t};Y.equals=function(r,e,t){return t.ignoreWhitespace?((!t.newlineIsToken||!r.includes(`
`))&&(r=r.trim()),(!t.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):t.ignoreNewlineAtEof&&!t.newlineIsToken&&(r.endsWith(`
`)&&(r=r.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),C.prototype.equals.call(this,r,e,t)};var qe=new C;qe.tokenize=function(r){return r.split(/(\S.+?[.!?])(?=\s+|$)/)};var Je=new C;Je.tokenize=function(r){return r.split(/([{}:;,]|\s+)/)};function F(r){"@babel/helpers - typeof";return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(r)}var N=new C;N.useLongestToken=!0;N.tokenize=Y.tokenize;N.castInput=function(r,e){var t=e.undefinedReplacement,a=e.stringifyReplacer,s=a===void 0?function(n,i){return typeof i>"u"?t:i}:a;return typeof r=="string"?r:JSON.stringify(G(r,null,null,s),s,"  ")};N.equals=function(r,e,t){return C.prototype.equals.call(N,r.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),t)};function G(r,e,t,a,s){e=e||[],t=t||[],a&&(r=a(s,r));var n;for(n=0;n<e.length;n+=1)if(e[n]===r)return t[n];var i;if(Object.prototype.toString.call(r)==="[object Array]"){for(e.push(r),i=new Array(r.length),t.push(i),n=0;n<r.length;n+=1)i[n]=G(r[n],e,t,a,s);return e.pop(),t.pop(),i}if(r&&r.toJSON&&(r=r.toJSON()),F(r)==="object"&&r!==null){e.push(r),i={},t.push(i);var u=[],o;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&u.push(o);for(u.sort(),n=0;n<u.length;n+=1)o=u[n],i[o]=G(r[o],e,t,a,o);e.pop(),t.pop()}else i=r;return i}var B=new C;B.tokenize=function(r){return r.slice()};B.join=B.removeEmpty=function(r){return r};const E=(...r)=>{};var U=(r=>(r[r.Unknown=0]="Unknown",r[r.Hard=1]="Hard",r[r.Medium=2]="Medium",r[r.Easy=3]="Easy",r))(U||{});class He{constructor(e){k(this,"name");k(this,"state",0);k(this,"stateProgress",0);k(this,"time",0);k(this,"rate",(e,t)=>{if(E(`Rating card ${this.name}`),e)switch(E(`Input was wrong, current state: ${U[this.state]}`),this.state){case 0:this.state=1;break;case 1:this.stateProgress=0;break;case 2:this.stateProgress=0,this.state=1;break}else switch(E(`Input was correct, current state: ${U[this.state]}`),this.state){case 0:this.state=3;break;case 1:this.stateProgress+=1,this.stateProgress>3&&(this.state=2,this.stateProgress=0);break;case 2:this.stateProgress+=1,this.stateProgress>2&&!t&&(this.state=3,this.stateProgress=0);break}switch(this.state){case 1:this.time=Date.now()+30*1e3;break;case 2:this.time=Date.now()+60*1e3;break}E(`Card ${this.name} time: ${this.time} (${this.time-Date.now()})`)});this.name=e}}var z;class Fe{constructor(){W(this,z,ve(void 0));k(this,"cards",[]);k(this,"addCard",e=>{this.cards.push(new He(e))});k(this,"getNextCard",()=>{E(this.cards);const e=this.cards.filter(s=>s.time<=Date.now()&&s.state!==0&&s.state!==3);if(e.length>0){const s=e[Math.floor(Math.random()*e.length)];return this.current=s,E(`Got card ${s.name} from expired list`),s}const t=this.cards.filter(s=>s.state===0);if(t.length>0){const s=t[Math.floor(Math.random()*t.length)];return this.current=s,E(`Got card ${s.name} from unknown list`),s}const a=this.cards.filter(s=>s.state!==3);if(a.length>0){const s=a[Math.floor(Math.random()*a.length)];return this.current=s,E(`Got card ${s.name} from all cards`),s}return this.current=void 0,!1})}get current(){return D(A(this,z))}set current(e){w(A(this,z),he(e))}}z=new WeakMap;var Ge=ce('<img class="map svelte-1kpeuij" id="map-marker" alt="">'),Be=ce('<div id="map-container" class="svelte-1kpeuij"><img class="map svelte-1kpeuij" id="map" alt=""> <!> <form id="form" class="wrong"><input type="text" id="input" autocomplete="off" placeholder="Kirjuta siia nimi" class="svelte-1kpeuij"></form> <p id="hint" class="svelte-1kpeuij"><!></p></div>');function We(r,e){Le(e,!0);const t=new Fe;let a,s,n=ve(""),i=!1,u=!1;Object.keys({"Ahja jõgi":0,"Elva jõgi":0,"Endla järv":0,"Erimistu järv":0,"Halliste jõgi":0,"Jägala jõgi":0,"Kahala järv":0,Karujärv:0,"Kassari jõgi":0,"Keila jõgi":0,"Koosa järv":0,"Kunda jõgi":0,"Kuremaa järv":0,"Mullutu Suurlaht":0,"Narva jõgi":0,"Narva veehoidla":0,"Navesti jõgi":0,"Paunküla veehoidla":0,"Pedja jõgi":0,"Peipsi järv":0,"Pirita jõgi":0,"Piusa jõgi":0,"Purtse jõgi":0,"Pärnu jõgi":0,"Põltsamaa jõgi":0,Pühajärv:0,"Raudna jõgi":0,Saadjärv:0,"Sauga jõgi":0,"Sutlepa meri":0,"Suur Emajõgi":0,"Tamula järv":0,"Tõhela järv":0,"Vagula järv":0,Valgejõgi:0,Veisjärv:0,"Vigala jõgi":0,"Väike-Emajõgi":0,"Võhandu jõgi":0,Võrtsjärv:0,"Õhne jõgi":0,"Ülemiste järv":0}).forEach(d=>{t.addCard(d)}),Pe(()=>{t.getNextCard(),a.focus(),a.addEventListener("blur",()=>{setTimeout(()=>{a.focus()},0)}),s.addEventListener("submit",d=>{if(a.value.length===0||t.current===void 0)return;const y=a.value.trim();if(a.value="",y.toLowerCase()===t.current.name.toLowerCase()){a.style.backgroundColor="#70e071",w(n,""),t.current.rate(u,i),u=!1,i=!1,t.getNextCard();return}const _=Ae(t.current.name,y,{ignoreCase:!0});_.filter(v=>v.added||v.removed).reduce((v,$)=>v+($.count||0),0)<=2?(i=!0,a.style.backgroundColor="#ffe600",w(n,""),_.forEach(v=>{v.added?w(n,D(n)+`<span style="color: red; white-space: pre;">${v.value}</span>`):v.removed||w(n,D(n)+v.value)}),w(n,D(n)+" -> "),_.forEach(v=>{v.removed?w(n,D(n)+`<span style="color: green; white-space: pre;">${v.value}</span>`):v.added||w(n,D(n)+v.value)})):(a.style.backgroundColor="#f56e6e",!u&&!i?(w(n,t.current.name.charAt(0)+t.current.name.replace(/[^ ]/g,"_").slice(1)),u=!0):w(n,he(t.current.name)))})});var l=Be(),f=R(l);ae(f,"src",`${ne??""}/veekogud/Kaart.png`);var c=b(f,2);{var j=d=>{var y=Ge();ze(()=>ae(y,"src",`${ne??""}/veekogud/${t.current.name??""}.png`)),S(d,y)};Ie(c,d=>{t.current!==void 0&&d(j)})}var p=b(c,2),m=R(p);te(m,d=>a=d,()=>a),V(p),te(p,d=>s=d,()=>s);var g=b(p,2),T=R(g);Oe(T,()=>D(n)),V(g),V(l),S(r,l),Ne()}export{We as component};

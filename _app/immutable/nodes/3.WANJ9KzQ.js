var de=Object.defineProperty;var X=r=>{throw TypeError(r)};var pe=(r,e,t)=>e in r?de(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var k=(r,e,t)=>pe(r,typeof e!="symbol"?e+"":e,t),ge=(r,e,t)=>e.has(r)||X("Cannot "+t);var A=(r,e,t)=>(ge(r,e,"read from private field"),t?t.call(r):e.get(r)),W=(r,e,t)=>e.has(r)?X("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t);import{b as K,d as Ce,a as S,t as ve}from"../chunks/disclose-version.CluIEblQ.js";import"../chunks/legacy.CXS3LavU.js";import{b as we,h as q,A as ee,d as ye,g as re,w as je,C as _e,x as ke,z as Ee,v as Te,f as De,T as Le,ab as $e,ac as he,Q as L,O as j,p as Ie,u as Pe,a5 as te,j as xe,a6 as R,a8 as V,a7 as b}from"../chunks/runtime.Dr7YNZyY.js";import{p as me,i as ze,b as ne}from"../chunks/this.C8ARfbbV.js";import{b as ae}from"../chunks/paths.D8rek44Y.js";function Ne(r,e,t,a,s){var n=r,i="",u;we(()=>{if(i===(i=e()??"")){q&&ee();return}u!==void 0&&(De(u),u=void 0),i!==""&&(u=ye(()=>{if(q){re.data;for(var o=ee(),l=o;o!==null&&(o.nodeType!==8||o.data!=="");)l=o,o=je(o);if(o===null)throw _e(),ke;K(re,l),n=Ee(o);return}var f=i+"",c=Ce(f);K(Te(c),c.lastChild),n.before(c)}))})}function se(r,e,t,a){var s=r.__attributes??(r.__attributes={});if(q){s[e]=r.getAttribute(e);return}s[e]!==(s[e]=t)&&(t==null?r.removeAttribute(e):typeof t!="string"&&Oe(r).includes(e)?r[e]=t:r.setAttribute(e,t))}var ie=new Map;function Oe(r){var e=ie.get(r.nodeName);if(e)return e;ie.set(r.nodeName,e=[]);for(var t,a=r,s=Element.prototype;s!==a;){t=$e(a);for(var n in t)t[n].set&&e.push(n);a=Le(a)}return e}function y(){}y.prototype={diff:function(e,t){var a,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=s.callback;typeof s=="function"&&(n=s,s={});var i=this;function u(h){return h=i.postProcess(h,s),n?(setTimeout(function(){n(h)},0),!0):h}e=this.castInput(e,s),t=this.castInput(t,s),e=this.removeEmpty(this.tokenize(e,s)),t=this.removeEmpty(this.tokenize(t,s));var o=t.length,l=e.length,f=1,c=o+l;s.maxEditLength!=null&&(c=Math.min(c,s.maxEditLength));var _=(a=s.timeout)!==null&&a!==void 0?a:1/0,p=Date.now()+_,d=[{oldPos:-1,lastComponent:void 0}],C=this.extractCommon(d[0],t,e,0,s);if(d[0].oldPos+1>=l&&C+1>=o)return u(oe(i,d[0].lastComponent,t,e,i.useLongestToken));var T=-1/0,m=1/0;function g(){for(var h=Math.max(T,-f);h<=Math.min(m,f);h+=2){var v=void 0,D=d[h-1],$=d[h+1];D&&(d[h-1]=void 0);var M=!1;if($){var Y=$.oldPos-h;M=$&&0<=Y&&Y<o}var Z=D&&D.oldPos+1<l;if(!M&&!Z){d[h]=void 0;continue}if(!Z||M&&D.oldPos<$.oldPos?v=i.addToPath($,!0,!1,0,s):v=i.addToPath(D,!1,!0,1,s),C=i.extractCommon(v,t,e,h,s),v.oldPos+1>=l&&C+1>=o)return u(oe(i,v.lastComponent,t,e,i.useLongestToken));d[h]=v,v.oldPos+1>=l&&(m=Math.min(m,h-1)),C+1>=o&&(T=Math.max(T,h+1))}f++}if(n)(function h(){setTimeout(function(){if(f>c||Date.now()>p)return n();g()||h()},0)})();else for(;f<=c&&Date.now()<=p;){var w=g();if(w)return w}},addToPath:function(e,t,a,s,n){var i=e.lastComponent;return i&&!n.oneChangePerToken&&i.added===t&&i.removed===a?{oldPos:e.oldPos+s,lastComponent:{count:i.count+1,added:t,removed:a,previousComponent:i.previousComponent}}:{oldPos:e.oldPos+s,lastComponent:{count:1,added:t,removed:a,previousComponent:i}}},extractCommon:function(e,t,a,s,n){for(var i=t.length,u=a.length,o=e.oldPos,l=o-s,f=0;l+1<i&&o+1<u&&this.equals(a[o+1],t[l+1],n);)l++,o++,f++,n.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return f&&!n.oneChangePerToken&&(e.lastComponent={count:f,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=o,l},equals:function(e,t,a){return a.comparator?a.comparator(e,t):e===t||a.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],a=0;a<e.length;a++)e[a]&&t.push(e[a]);return t},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function oe(r,e,t,a,s){for(var n=[],i;e;)n.push(e),i=e.previousComponent,delete e.previousComponent,e=i;n.reverse();for(var u=0,o=n.length,l=0,f=0;u<o;u++){var c=n[u];if(c.removed)c.value=r.join(a.slice(f,f+c.count)),f+=c.count;else{if(!c.added&&s){var _=t.slice(l,l+c.count);_=_.map(function(p,d){var C=a[f+d];return C.length>p.length?C:p}),c.value=r.join(_)}else c.value=r.join(t.slice(l,l+c.count));l+=c.count,c.added||(f+=c.count)}}return n}var Me=new y;function Ae(r,e,t){return Me.diff(r,e,t)}function ue(r,e){var t;for(t=0;t<r.length&&t<e.length;t++)if(r[t]!=e[t])return r.slice(0,t);return r.slice(0,t)}function le(r,e){var t;if(!r||!e||r[r.length-1]!=e[e.length-1])return"";for(t=0;t<r.length&&t<e.length;t++)if(r[r.length-(t+1)]!=e[e.length-(t+1)])return r.slice(-t);return r.slice(-t)}function J(r,e,t){if(r.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(r)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return t+r.slice(e.length)}function H(r,e,t){if(!e)return r+t;if(r.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(r)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return r.slice(0,-e.length)+t}function I(r,e){return J(r,e,"")}function z(r,e){return H(r,e,"")}function fe(r,e){return e.slice(0,Re(r,e))}function Re(r,e){var t=0;r.length>e.length&&(t=r.length-e.length);var a=e.length;r.length<e.length&&(a=r.length);var s=Array(a),n=0;s[0]=0;for(var i=1;i<a;i++){for(e[i]==e[n]?s[i]=s[n]:s[i]=n;n>0&&e[i]!=e[n];)n=s[n];e[i]==e[n]&&n++}n=0;for(var u=t;u<r.length;u++){for(;n>0&&r[u]!=e[n];)n=s[n];r[u]==e[n]&&n++}return n}var N="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Ve=new RegExp("[".concat(N,"]+|\\s+|[^").concat(N,"]"),"ug"),O=new y;O.equals=function(r,e,t){return t.ignoreCase&&(r=r.toLowerCase(),e=e.toLowerCase()),r.trim()===e.trim()};O.tokenize=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');t=Array.from(e.intlSegmenter.segment(r),function(n){return n.segment})}else t=r.match(Ve)||[];var a=[],s=null;return t.forEach(function(n){/\s/.test(n)?s==null?a.push(n):a.push(a.pop()+n):/\s/.test(s)?a[a.length-1]==s?a.push(a.pop()+n):a.push(s+n):a.push(n),s=n}),a};O.join=function(r){return r.map(function(e,t){return t==0?e:e.replace(/^\s+/,"")}).join("")};O.postProcess=function(r,e){if(!r||e.oneChangePerToken)return r;var t=null,a=null,s=null;return r.forEach(function(n){n.added?a=n:n.removed?s=n:((a||s)&&ce(t,s,a,n),t=n,a=null,s=null)}),(a||s)&&ce(t,s,a,null),r};function ce(r,e,t,a){if(e&&t){var s=e.value.match(/^\s*/)[0],n=e.value.match(/\s*$/)[0],i=t.value.match(/^\s*/)[0],u=t.value.match(/\s*$/)[0];if(r){var o=ue(s,i);r.value=H(r.value,i,o),e.value=I(e.value,o),t.value=I(t.value,o)}if(a){var l=le(n,u);a.value=J(a.value,u,l),e.value=z(e.value,l),t.value=z(t.value,l)}}else if(t)r&&(t.value=t.value.replace(/^\s*/,"")),a&&(a.value=a.value.replace(/^\s*/,""));else if(r&&a){var f=a.value.match(/^\s*/)[0],c=e.value.match(/^\s*/)[0],_=e.value.match(/\s*$/)[0],p=ue(f,c);e.value=I(e.value,p);var d=le(I(f,p),_);e.value=z(e.value,d),a.value=J(a.value,f,d),r.value=H(r.value,f,f.slice(0,f.length-d.length))}else if(a){var C=a.value.match(/^\s*/)[0],T=e.value.match(/\s*$/)[0],m=fe(T,C);e.value=z(e.value,m)}else if(r){var g=r.value.match(/\s*$/)[0],w=e.value.match(/^\s*/)[0],h=fe(g,w);e.value=I(e.value,h)}}var be=new y;be.tokenize=function(r){var e=new RegExp("(\\r?\\n)|[".concat(N,"]+|[^\\S\\n\\r]+|[^").concat(N,"]"),"ug");return r.match(e)||[]};var Q=new y;Q.tokenize=function(r,e){e.stripTrailingCr&&(r=r.replace(/\r\n/g,`
`));var t=[],a=r.split(/(\n|\r\n)/);a[a.length-1]||a.pop();for(var s=0;s<a.length;s++){var n=a[s];s%2&&!e.newlineIsToken?t[t.length-1]+=n:t.push(n)}return t};Q.equals=function(r,e,t){return t.ignoreWhitespace?((!t.newlineIsToken||!r.includes(`
`))&&(r=r.trim()),(!t.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):t.ignoreNewlineAtEof&&!t.newlineIsToken&&(r.endsWith(`
`)&&(r=r.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),y.prototype.equals.call(this,r,e,t)};var qe=new y;qe.tokenize=function(r){return r.split(/(\S.+?[.!?])(?=\s+|$)/)};var Je=new y;Je.tokenize=function(r){return r.split(/([{}:;,]|\s+)/)};function F(r){"@babel/helpers - typeof";return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(r)}var P=new y;P.useLongestToken=!0;P.tokenize=Q.tokenize;P.castInput=function(r,e){var t=e.undefinedReplacement,a=e.stringifyReplacer,s=a===void 0?function(n,i){return typeof i>"u"?t:i}:a;return typeof r=="string"?r:JSON.stringify(G(r,null,null,s),s,"  ")};P.equals=function(r,e,t){return y.prototype.equals.call(P,r.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),t)};function G(r,e,t,a,s){e=e||[],t=t||[],a&&(r=a(s,r));var n;for(n=0;n<e.length;n+=1)if(e[n]===r)return t[n];var i;if(Object.prototype.toString.call(r)==="[object Array]"){for(e.push(r),i=new Array(r.length),t.push(i),n=0;n<r.length;n+=1)i[n]=G(r[n],e,t,a,s);return e.pop(),t.pop(),i}if(r&&r.toJSON&&(r=r.toJSON()),F(r)==="object"&&r!==null){e.push(r),i={},t.push(i);var u=[],o;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&u.push(o);for(u.sort(),n=0;n<u.length;n+=1)o=u[n],i[o]=G(r[o],e,t,a,o);e.pop(),t.pop()}else i=r;return i}var U=new y;U.tokenize=function(r){return r.slice()};U.join=U.removeEmpty=function(r){return r};const E=(...r)=>{};var B=(r=>(r[r.Unknown=0]="Unknown",r[r.Hard=1]="Hard",r[r.Medium=2]="Medium",r[r.Easy=3]="Easy",r))(B||{});class He{constructor(e){k(this,"name");k(this,"state",0);k(this,"stateProgress",0);k(this,"time",0);k(this,"rate",(e,t)=>{if(E(`Rating card ${this.name}`),e)switch(E(`Input was wrong, current state: ${B[this.state]}`),this.state){case 0:this.state=1;break;case 1:this.stateProgress=0;break;case 2:this.stateProgress=0,this.state=1;break}else switch(E(`Input was correct, current state: ${B[this.state]}`),this.state){case 0:this.state=3;break;case 1:this.stateProgress+=1,this.stateProgress>3&&(this.state=2,this.stateProgress=0);break;case 2:this.stateProgress+=1,this.stateProgress>2&&!t&&(this.state=3,this.stateProgress=0);break}switch(this.state){case 1:this.time=Date.now()+30*1e3;break;case 2:this.time=Date.now()+60*1e3;break}E(`Card ${this.name} time: ${this.time} (${this.time-Date.now()})`)});this.name=e}}var x;class Fe{constructor(){W(this,x,he(void 0));k(this,"cards",[]);k(this,"addCard",e=>{this.cards.push(new He(e))});k(this,"getNextCard",()=>{E(this.cards);const e=this.cards.filter(s=>s.time<=Date.now()&&s.state!==0&&s.state!==3);if(e.length>0){const s=e[Math.floor(Math.random()*e.length)];return this.current=s,E(`Got card ${s.name} from expired list`),s}const t=this.cards.filter(s=>s.state===0);if(t.length>0){const s=t[Math.floor(Math.random()*t.length)];return this.current=s,E(`Got card ${s.name} from unknown list`),s}const a=this.cards.filter(s=>s.state!==3);if(a.length>0){const s=a[Math.floor(Math.random()*a.length)];return this.current=s,E(`Got card ${s.name} from all cards`),s}return this.current=void 0,!1})}get current(){return L(A(this,x))}set current(e){j(A(this,x),me(e))}}x=new WeakMap;var Ge=ve('<img class="map svelte-1kpeuij" id="map-marker" alt="">'),Ue=ve('<div id="map-container" class="svelte-1kpeuij"><img class="map svelte-1kpeuij" id="map" alt=""> <!> <form id="form" class="wrong"><input type="text" id="input" autocomplete="off" placeholder="Kirjuta siia nimi" class="svelte-1kpeuij"></form> <p id="hint" class="svelte-1kpeuij"><!></p></div>');function Be(r,e){Ie(e,!0);const t=new Fe;let a,s,n=he(""),i=!1,u=!1;const o={};e.names.forEach(m=>{t.addCard(m);const g=new Image;g.src=`${ae}/maps/${e.path}/${m}.png`,o[m]=g}),Pe(()=>{t.getNextCard(),a.focus(),a.addEventListener("blur",()=>{setTimeout(()=>{a.focus()},0)}),s.addEventListener("submit",m=>{if(a.value.length===0||t.current===void 0)return;const g=a.value.trim();if(a.value="",g.toLowerCase()===t.current.name.toLowerCase()){a.style.backgroundColor="#70e071",j(n,""),t.current.rate(u,i),u=!1,i=!1,t.getNextCard();return}const w=Ae(t.current.name,g,{ignoreCase:!0});w.filter(v=>v.added||v.removed).reduce((v,D)=>v+(D.count||0),0)<=2?(i=!0,a.style.backgroundColor="#ffe600",j(n,""),w.forEach(v=>{v.added?j(n,L(n)+`<span style="color: red; white-space: pre;">${v.value}</span>`):v.removed||j(n,L(n)+v.value)}),j(n,L(n)+" -> "),w.forEach(v=>{v.removed?j(n,L(n)+`<span style="color: green; white-space: pre;">${v.value}</span>`):v.added||j(n,L(n)+v.value)})):(a.style.backgroundColor="#f56e6e",!u&&!i?(j(n,t.current.name.charAt(0)+t.current.name.replace(/[^ ]/g,"_").slice(1)),u=!0):j(n,me(t.current.name)))})});var l=Ue(),f=R(l),c=V(f,2);{var _=m=>{var g=Ge();te(()=>{var w;return se(g,"src",(w=o[t.current.name])==null?void 0:w.src)}),S(m,g)};ze(c,m=>{t.current!==void 0&&m(_)})}var p=V(c,2),d=R(p);ne(d,m=>a=m,()=>a),b(p),ne(p,m=>s=m,()=>s);var C=V(p,2),T=R(C);Ne(T,()=>L(n)),b(C),b(l),te(()=>se(f,"src",`${ae??""}/maps/${e.path??""}/Kaart.png`)),S(r,l),xe()}function Se(r){Be(r,{path:"veekogud",names:["Ahja jõgi","Elva jõgi","Endla järv","Erimistu järv","Halliste jõgi","Jägala jõgi","Kahala järv","Karujärv","Kassari jõgi","Keila jõgi","Koosa järv","Kunda jõgi","Kuremaa järv","Mullutu Suurlaht","Narva jõgi","Narva veehoidla","Navesti jõgi","Paunküla veehoidla","Pedja jõgi","Peipsi järv","Pirita jõgi","Piusa jõgi","Purtse jõgi","Pärnu jõgi","Põltsamaa jõgi","Pühajärv","Raudna jõgi","Saadjärv","Sauga jõgi","Sutlepa meri","Suur Emajõgi","Tamula järv","Tõhela järv","Vagula järv","Valgejõgi","Veisjärv","Vigala jõgi","Väike-Emajõgi","Võhandu jõgi","Võrtsjärv","Õhne jõgi","Ülemiste järv"]})}export{Se as component};

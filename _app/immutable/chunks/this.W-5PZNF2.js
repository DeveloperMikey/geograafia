import{S as x,R as L,T as Y,U as _,V as j,W as g,X as E,Y as l,Z as T,z as q,_ as K,g as M,x as U,f as Z,h as I,I as z,E as B,$ as C,a0 as G,G as H,F as O,a1 as S,i as m,a2 as D,m as V,a3 as W,a4 as X,b as $,a5 as J}from"./runtime.DzlGlrzq.js";function w(i,d=null,b){if(typeof i!="object"||i===null||x in i)return i;const v=M(i);if(v!==L&&v!==Y)return i;var r=new Map,n=U(i),y=_(0);n&&r.set("length",_(i.length));var h;return new Proxy(i,{defineProperty(s,e,t){(!("value"in t)||t.configurable===!1||t.enumerable===!1||t.writable===!1)&&j();var f=r.get(e);return f===void 0?(f=_(t.value),r.set(e,f)):g(f,w(t.value,h)),!0},deleteProperty(s,e){var t=r.get(e);if(t===void 0)e in s&&r.set(e,_(l));else{if(n&&typeof e=="string"){var f=r.get("length"),a=Number(e);Number.isInteger(a)&&a<f.v&&g(f,a)}g(t,l),k(y)}return!0},get(s,e,t){var c;if(e===x)return i;var f=r.get(e),a=e in s;if(f===void 0&&(!a||(c=E(s,e))!=null&&c.writable)&&(f=_(w(a?s[e]:l,h)),r.set(e,f)),f!==void 0){var u=T(f);return u===l?void 0:u}return Reflect.get(s,e,t)},getOwnPropertyDescriptor(s,e){var t=Reflect.getOwnPropertyDescriptor(s,e);if(t&&"value"in t){var f=r.get(e);f&&(t.value=T(f))}else if(t===void 0){var a=r.get(e),u=a==null?void 0:a.v;if(a!==void 0&&u!==l)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return t},has(s,e){var u;if(e===x)return!0;var t=r.get(e),f=t!==void 0&&t.v!==l||Reflect.has(s,e);if(t!==void 0||q!==null&&(!f||(u=E(s,e))!=null&&u.writable)){t===void 0&&(t=_(f?w(s[e],h):l),r.set(e,t));var a=T(t);if(a===l)return!1}return f},set(s,e,t,f){var A;var a=r.get(e),u=e in s;if(n&&e==="length")for(var c=t;c<a.v;c+=1){var o=r.get(c+"");o!==void 0?g(o,l):c in s&&(o=_(l),r.set(c+"",o))}a===void 0?(!u||(A=E(s,e))!=null&&A.writable)&&(a=_(void 0),g(a,w(t,h)),r.set(e,a)):(u=a.v!==l,g(a,w(t,h)));var R=Reflect.getOwnPropertyDescriptor(s,e);if(R!=null&&R.set&&R.set.call(f,t),!u){if(n&&typeof e=="string"){var P=r.get("length"),N=Number(e);Number.isInteger(N)&&N>=P.v&&g(P,N+1)}k(y)}return!0},ownKeys(s){T(y);var e=Reflect.ownKeys(s).filter(a=>{var u=r.get(a);return u===void 0||u.v!==l});for(var[t,f]of r)f.v!==l&&!(t in s)&&e.push(t);return e},setPrototypeOf(){K()}})}function k(i,d=1){g(i,i.v+d)}function p(i,d,b=!1){I&&z();var v=i,r=null,n=null,y=l,h=b?B:0,s=!1;const e=(f,a=!0)=>{s=!0,t(a,f)},t=(f,a)=>{if(y===(y=f))return;let u=!1;if(I){const c=v.data===C;!!y===c&&(v=G(),H(v),O(!1),u=!0)}y?(r?S(r):a&&(r=m(()=>a(v))),n&&D(n,()=>{n=null})):(n?S(n):a&&(n=m(()=>a(v))),r&&D(r,()=>{r=null})),u&&O(!0)};Z(()=>{s=!1,d(e),s||t(null,null)},h),I&&(v=V)}function F(i,d){return i===d||(i==null?void 0:i[x])===d}function ee(i={},d,b,v){return W(()=>{var r,n;return X(()=>{r=n,n=[],$(()=>{i!==b(...n)&&(d(i,...n),r&&F(b(...r),i)&&d(null,...r))})}),()=>{J(()=>{n&&F(b(...n),i)&&d(null,...n)})}}),i}export{ee as b,p as i,w as p};

var ge=Object.defineProperty;var ee=t=>{throw TypeError(t)};var we=(t,e,r)=>e in t?ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var L=(t,e,r)=>we(t,typeof e!="symbol"?e+"":e,r),Ce=(t,e,r)=>e.has(t)||ee("Cannot "+r);var H=(t,e,r)=>(Ce(t,e,"read from private field"),r?r.call(t):e.get(t)),te=(t,e,r)=>e.has(t)?ee("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r);import{a as re,d as ye,b as B,t as K}from"./disclose-version.CfM79znY.js";import{a5 as _e,M as ke,h as ne,p as ae,z as Ee,q as ie,l as xe,t as Te,m as De,o as $e,k as Le,P as Ie,ae as V,Z as I,W as _,A as be,E as ze,G as A,Q as Ae,ab as se,B as Me,I as O,K as N}from"./runtime.80eSOSnp.js";import{d as Oe}from"./events.BK9XBtgx.js";import{p as de,i as oe,b as ue}from"./this.BWAiEOcR.js";import{s as le}from"./attributes.DxBHVAUS.js";import{b as Z}from"./paths.DkflM4OQ.js";function Ne(t,e){{const r=document.body;t.autofocus=!0,_e(()=>{document.activeElement===r&&t.focus()})}}function Re(t,e,r,n,i){var a=t,s="",o;ke(()=>{if(s===(s=e()??"")){ne&&ae();return}o!==void 0&&(Ie(o),o=void 0),s!==""&&(o=Ee(()=>{if(ne){ie.data;for(var u=ae(),l=u;u!==null&&(u.nodeType!==8||u.data!=="");)l=u,u=xe(u);if(u===null)throw Te(),De;re(ie,l),a=$e(u);return}var f=s+"",c=ye(f);re(Le(c),c.lastChild),a.before(c)}))})}function k(){}k.prototype={diff:function(e,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.callback;typeof i=="function"&&(a=i,i={});var s=this;function o(v){return v=s.postProcess(v,i),a?(setTimeout(function(){a(v)},0),!0):v}e=this.castInput(e,i),r=this.castInput(r,i),e=this.removeEmpty(this.tokenize(e,i)),r=this.removeEmpty(this.tokenize(r,i));var u=r.length,l=e.length,f=1,c=u+l;i.maxEditLength!=null&&(c=Math.min(c,i.maxEditLength));var w=(n=i.timeout)!==null&&n!==void 0?n:1/0,C=Date.now()+w,p=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(p[0],r,e,0,i);if(p[0].oldPos+1>=l&&y+1>=u)return o(fe(s,p[0].lastComponent,r,e,s.useLongestToken));var E=-1/0,D=1/0;function z(){for(var v=Math.max(E,-f);v<=Math.min(D,f);v+=2){var T=void 0,m=p[v-1],h=p[v+1];m&&(p[v-1]=void 0);var g=!1;if(h){var x=h.oldPos-v;g=h&&0<=x&&x<u}var $=m&&m.oldPos+1<l;if(!g&&!$){p[v]=void 0;continue}if(!$||g&&m.oldPos<h.oldPos?T=s.addToPath(h,!0,!1,0,i):T=s.addToPath(m,!1,!0,1,i),y=s.extractCommon(T,r,e,v,i),T.oldPos+1>=l&&y+1>=u)return o(fe(s,T.lastComponent,r,e,s.useLongestToken));p[v]=T,T.oldPos+1>=l&&(D=Math.min(D,v-1)),y+1>=u&&(E=Math.max(E,v+1))}f++}if(a)(function v(){setTimeout(function(){if(f>c||Date.now()>C)return a();z()||v()},0)})();else for(;f<=c&&Date.now()<=C;){var M=z();if(M)return M}},addToPath:function(e,r,n,i,a){var s=e.lastComponent;return s&&!a.oneChangePerToken&&s.added===r&&s.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:s.count+1,added:r,removed:n,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:s}}},extractCommon:function(e,r,n,i,a){for(var s=r.length,o=n.length,u=e.oldPos,l=u-i,f=0;l+1<s&&u+1<o&&this.equals(n[u+1],r[l+1],a);)l++,u++,f++,a.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return f&&!a.oneChangePerToken&&(e.lastComponent={count:f,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=u,l},equals:function(e,r,n){return n.comparator?n.comparator(e,r):e===r||n.ignoreCase&&e.toLowerCase()===r.toLowerCase()},removeEmpty:function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};function fe(t,e,r,n,i){for(var a=[],s;e;)a.push(e),s=e.previousComponent,delete e.previousComponent,e=s;a.reverse();for(var o=0,u=a.length,l=0,f=0;o<u;o++){var c=a[o];if(c.removed)c.value=t.join(n.slice(f,f+c.count)),f+=c.count;else{if(!c.added&&i){var w=r.slice(l,l+c.count);w=w.map(function(C,p){var y=n[f+p];return y.length>C.length?y:C}),c.value=t.join(w)}else c.value=t.join(r.slice(l,l+c.count));l+=c.count,c.added||(f+=c.count)}}return a}var qe=new k;function Je(t,e,r){return qe.diff(t,e,r)}function ce(t,e){var r;for(r=0;r<t.length&&r<e.length;r++)if(t[r]!=e[r])return t.slice(0,r);return t.slice(0,r)}function ve(t,e){var r;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(r=0;r<t.length&&r<e.length;r++)if(t[t.length-(r+1)]!=e[e.length-(r+1)])return t.slice(-r);return t.slice(-r)}function P(t,e,r){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+t.slice(e.length)}function Q(t,e,r){if(!e)return t+r;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+r}function R(t,e){return P(t,e,"")}function G(t,e){return Q(t,e,"")}function me(t,e){return e.slice(0,Ge(t,e))}function Ge(t,e){var r=0;t.length>e.length&&(r=t.length-e.length);var n=e.length;t.length<e.length&&(n=t.length);var i=Array(n),a=0;i[0]=0;for(var s=1;s<n;s++){for(e[s]==e[a]?i[s]=i[a]:i[s]=a;a>0&&e[s]!=e[a];)a=i[a];e[s]==e[a]&&a++}a=0;for(var o=r;o<t.length;o++){for(;a>0&&t[o]!=e[a];)a=i[a];t[o]==e[a]&&a++}return a}var U="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Ue=new RegExp("[".concat(U,"]+|\\s+|[^").concat(U,"]"),"ug"),F=new k;F.equals=function(t,e,r){return r.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};F.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(t),function(a){return a.segment})}else r=t.match(Ue)||[];var n=[],i=null;return r.forEach(function(a){/\s/.test(a)?i==null?n.push(a):n.push(n.pop()+a):/\s/.test(i)?n[n.length-1]==i?n.push(n.pop()+a):n.push(i+a):n.push(a),i=a}),n};F.join=function(t){return t.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};F.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var r=null,n=null,i=null;return t.forEach(function(a){a.added?n=a:a.removed?i=a:((n||i)&&he(r,i,n,a),r=a,n=null,i=null)}),(n||i)&&he(r,i,n,null),t};function he(t,e,r,n){if(e&&r){var i=e.value.match(/^\s*/)[0],a=e.value.match(/\s*$/)[0],s=r.value.match(/^\s*/)[0],o=r.value.match(/\s*$/)[0];if(t){var u=ce(i,s);t.value=Q(t.value,s,u),e.value=R(e.value,u),r.value=R(r.value,u)}if(n){var l=ve(a,o);n.value=P(n.value,o,l),e.value=G(e.value,l),r.value=G(r.value,l)}}else if(r)t&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(t&&n){var f=n.value.match(/^\s*/)[0],c=e.value.match(/^\s*/)[0],w=e.value.match(/\s*$/)[0],C=ce(f,c);e.value=R(e.value,C);var p=ve(R(f,C),w);e.value=G(e.value,p),n.value=P(n.value,f,p),t.value=Q(t.value,f,f.slice(0,f.length-p.length))}else if(n){var y=n.value.match(/^\s*/)[0],E=e.value.match(/\s*$/)[0],D=me(E,y);e.value=G(e.value,D)}else if(t){var z=t.value.match(/\s*$/)[0],M=e.value.match(/^\s*/)[0],v=me(z,M);e.value=R(e.value,v)}}var Fe=new k;Fe.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(U,"]+|[^\\S\\n\\r]+|[^").concat(U,"]"),"ug");return t.match(e)||[]};var S=new k;S.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var a=n[i];i%2&&!e.newlineIsToken?r[r.length-1]+=a:r.push(a)}return r};S.equals=function(t,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),k.prototype.equals.call(this,t,e,r)};var He=new k;He.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var Be=new k;Be.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Y(t){"@babel/helpers - typeof";return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(t)}var q=new k;q.useLongestToken=!0;q.tokenize=S.tokenize;q.castInput=function(t,e){var r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(a,s){return typeof s>"u"?r:s}:n;return typeof t=="string"?t:JSON.stringify(X(t,null,null,i),i,"  ")};q.equals=function(t,e,r){return k.prototype.equals.call(q,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function X(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return r[a];var s;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),s=new Array(t.length),r.push(s),a=0;a<t.length;a+=1)s[a]=X(t[a],e,r,n,i);return e.pop(),r.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),Y(t)==="object"&&t!==null){e.push(t),s={},r.push(s);var o=[],u;for(u in t)Object.prototype.hasOwnProperty.call(t,u)&&o.push(u);for(o.sort(),a=0;a<o.length;a+=1)u=o[a],s[u]=X(t[u],e,r,n,u);e.pop(),r.pop()}else s=t;return s}var j=new k;j.tokenize=function(t){return t.slice()};j.join=j.removeEmpty=function(t){return t};const b=(...t)=>{};var W=(t=>(t[t.Unknown=0]="Unknown",t[t.Hard=1]="Hard",t[t.Medium=2]="Medium",t[t.Easy=3]="Easy",t))(W||{});class Ve{constructor(e){L(this,"name");L(this,"state",0);L(this,"time",0);L(this,"rate",(e,r)=>{if(b(`Rating card ${this.name}`),e)switch(b(`Input was wrong, current state: ${W[this.state]}`),this.state){case 0:this.state=1;break;case 1:break;case 2:this.state=1;break}else switch(b(`Input was correct, current state: ${W[this.state]}`),this.state){case 0:this.state=3;break;case 1:this.state=2;break;case 2:r||(this.state=3);break}switch(this.state){case 1:this.time=Date.now()+60*1e3;break;case 2:this.time=Date.now()+120*1e3;break}b(`Card ${this.name} time: ${this.time} (${this.time-Date.now()})`)});this.name=e}}var J;class Ze{constructor(){te(this,J,V(void 0));L(this,"cards",[]);L(this,"addCard",e=>{this.cards.push(new Ve(e))});L(this,"getNextCard",()=>{b(this.cards);const e=this.cards.filter(i=>i.time<=Date.now()&&i.state!==0&&i.state!==3);if(e.length>0){const i=e[Math.floor(Math.random()*e.length)];return this.current=i,b(`Got card ${i.name} from expired list`),i}const r=this.cards.filter(i=>i.state===0);if(r.length>0){const i=r[Math.floor(Math.random()*r.length)];return this.current=i,b(`Got card ${i.name} from unknown list`),i}const n=this.cards.filter(i=>i.state!==3);if(n.length>0){const i=n[Math.floor(Math.random()*n.length)];return this.current=i,b(`Got card ${i.name} from all cards`),i}return this.current=void 0,!1})}get current(){return I(H(this,J))}set current(e){_(H(this,J),de(e))}}J=new WeakMap;var Pe=K('<img class="map svelte-3m9gcx" id="map-marker" alt="">'),Qe=()=>window.location.href=`${Z}/`,Ye=()=>window.location.reload(),Xe=K('<div id="end-screen" class="svelte-3m9gcx"><div id="end-box" class="svelte-3m9gcx"><h2 class="svelte-3m9gcx">Tehtud!</h2> <button class="svelte-3m9gcx">Avaleht</button> <button class="svelte-3m9gcx">Uuesti</button></div></div>'),je=K('<head><meta name="viewport" content="width=device-width, initial-scale=1, interactive-widget=resizes-content"></head> <div id="map-container" class="svelte-3m9gcx"><img class="map svelte-3m9gcx" id="map" alt=""> <!> <form id="form"><input type="text" id="input" autocomplete="off" placeholder="Kirjuta siia nimi" class="svelte-3m9gcx"></form> <p id="hint" class="svelte-3m9gcx"><!></p></div> <!>',1);function it(t,e){be(e,!0);let r=["j채rv","j천gi","meri","saar","poolsaar","laht","v채in"];const n=new Ze;let i=V(!1),a,s,o=V(""),u=!1,l=!1;const f={};e.names.forEach(m=>{n.addCard(m);const h=new Image;h.src=`${Z}/maps/${e.path}/${m}.png`,f[m]=h}),ze(()=>{n.getNextCard(),a.focus(),a.addEventListener("blur",()=>{setTimeout(()=>{a.focus()},0)}),s.addEventListener("submit",m=>{if(a.value.length===0||n.current===void 0)return;let h=a.value.trim();a.value="";var g=h.toLowerCase().replaceAll("-"," ");g==="sutlepa j채rv"&&(g="sutlepa meri");var x=n.current.name.toLowerCase().replaceAll("-"," ");if(r.forEach(d=>{x.endsWith(d)&&(g=g.replaceAll(` ${d}`,""),x=x.replaceAll(` ${d}`,""))}),g===x){a.style.backgroundColor="#70e071",_(o,""),n.current.rate(l,u),l=!1,u=!1,n.getNextCard()||_(i,!0);return}const $=Je(n.current.name,h,{ignoreCase:!0});$.filter(d=>d.added||d.removed).reduce((d,pe)=>d+(pe.count||0),0)<=2?(u=!0,a.style.backgroundColor="#ffe600",_(o,""),$.forEach(d=>{d.added?_(o,I(o)+`<span style="color: red; white-space: pre;">${d.value}</span>`):d.removed||_(o,I(o)+d.value)}),_(o,I(o)+" -> "),$.forEach(d=>{d.removed?_(o,I(o)+`<span style="color: green; white-space: pre;">${d.value}</span>`):d.added||_(o,I(o)+d.value)})):(a.style.backgroundColor="#f56e6e",!l&&!u?(_(o,n.current.name.charAt(0)+n.current.name.replace(/[^ ]/g,"_").slice(1)),l=!0):_(o,de(n.current.name)))})});var c=je(),w=A(Ae(c),2),C=O(w),p=A(C,2);{var y=m=>{var h=Pe();se(()=>{var g;return le(h,"src",(g=f[n.current.name])==null?void 0:g.src)}),B(m,h)};oe(p,m=>{n.current!==void 0&&m(y)})}var E=A(p,2),D=O(E);Ne(D),ue(D,m=>a=m,()=>a),N(E),ue(E,m=>s=m,()=>s);var z=A(E,2),M=O(z);Re(M,()=>I(o)),N(z),N(w);var v=A(w,2);{var T=m=>{var h=Xe(),g=O(h),x=A(O(g),2);x.__click=[Qe];var $=A(x,2);$.__click=[Ye],N(g),N(h),B(m,h)};oe(v,m=>{I(i)&&m(T)})}se(()=>le(C,"src",`${Z??""}/maps/${e.path??""}/Kaart.png`)),B(t,c),Me()}Oe(["click"]);export{it as M};
